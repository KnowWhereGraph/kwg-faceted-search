<main id="spatial-search" ng-controller="spatialSearchController">

    <div class="left-filters">

        <!-- search input box -->
        <div class="search-dropdown-input">
            <div class="input-group">
                <input id="input-query" type="text" class="form-control" placeholder="Enter your query">
                <div class="input-group-append">
                    <button class="btn btn-outline-secondary" type="button">Search</button>
                </div>
            </div>

            <div class="spatial-search">
                <button id="spatial-query" type="button" class="btn" data-toggle="button">
                    <div>
                        <i class="bi bi-geo-alt"></i><span>Start a Spatial Search</span>
                    </div>
                </button>
            </div>
        </div>

        <!-- options for filters -->
        <ul class="filters" ng-controller="filters-controller">
            <li id="expertise">
                <p class="filter-title">EXPERTISE</p>
                <div class="filter">
                    <!-- part1 -->
                    <p class="filter-type">rdf:type <i class="bi bi-chevron-up"></i></p>

                    <!-- part2: add div for dynamically showing selected item -->
                    <div class="selectedItem" ng-show="showSelectedExpertise">
                        <input type="checkbox" class="form-check-input me-1" ng-model="checkedExpertise" ng-click="unselectExpertise()"> <span>{{selectedExpertise}}</span>
                        <p>Sub-Topic
                            <i class="bi bi-chevron-up"></i>
                        </p>
                    </div>

                    <!-- part3 -->
                    <input type="text" class="form-control" placeholder="Find a filter">

                    <!-- part4 -->
                    <ul class="list-group" id="expertise-list">
                        <!-- <li ng-repeat="topic in expertiseTopics" ng-show="expertiseTopicShow">
                            <span><input type="checkbox" class="form-check-input me-1"
                                    ng-click="selectExpertise($event)" value="topic" name="expertiseTopic">
                                {{topic}}</span>
                        </li> -->

                        <li ng-repeat="supertopicUrl in supertopicsUrls" ng-show="expertiseTopicShow">
                            <span><input type="checkbox" class="form-check-input me-1"
                                    ng-click="selectExpertise($event)" value="{{supertopicUrl}}" name="expertiseTopic">{{getLabel(supertopicUrl)}}</span>
                        </li>
                        <li ng-repeat="expertiseSubtopic in expertiseSubtopics" ng-show="expertiseSubtopicShow">
                            <input type="checkbox" class="form-check-input me-1" value="{{expertiseSubtopic}}" name="expertiseSubtopic"> {{getSubtopicLabel(expertiseSubtopic)}}
                        </li>


                        <!-- <li ng-repeat="subtopic in expertiseSubtopics" ng-show="expertiseSubtopicShow">
                            <input type="checkbox" class="form-check-input me-1" value="{{subtopic}}" name="expertiseSubtopic"> {{subtopic}}
                        </li> -->
                    </ul>
                </div>
            </li>

            <li id="place">
                <p class="filter-title">PLACE</p>
                <div class="filter">
                    <!-- part1 -->
                    <p class="filter-type">rdf:type <i class="bi bi-chevron-up"></i></p>

                    <!-- part2: add div for dynamically showing the selected item -->
                    <div class="selectedItem" ng-show="showSelectedPlace">
                        <input type="checkbox" class="form-check-input me-1" ng-model="checkedPlace" ng-click="unselectPlace()"> <span>{{selectedPlace}}</span>
                        <p>Sub-Topic
                            <i class="bi bi-chevron-up"></i>
                        </p>
                    </div>

                    <!-- part3 -->
                    <ul class="list-group" id="place-list">

                        <li ng-repeat="placeSupertopicUrl in placeSupertopicsUrls" ng-show="placesTopicShow">
                            <span><input type="checkbox" class="form-check-input me-1"
                                    ng-click="selectPlace($event)" value="{{placeSupertopicUrl}}" name="placeTopic">{{getPlaceLabel(placeSupertopicUrl)}}</span>
                        </li>
                        <li ng-repeat="subPlace in subPlaces" ng-show="placeSubtopicShow">
                            <input type="checkbox" class="form-check-input me-1" value="{{subPlace}}" name="subplace"> {{getSubplaceLabel(subPlace)}}
                        </li>

                        <!-- <li ng-repeat="place in places" ng-show="placesTopicShow">
                            <span><input type="checkbox" class="form-check-input me-1" ng-click="selectPlace($event)"
                                    value="{{place}}" name="place">
                                {{place}}</span>
                        </li> -->

                        <!-- dynamically added -->
                        <!-- <li ng-repeat="subplace in subPlaces" ng-show="placeSubtopicShow">
                            <input type="checkbox" class="form-check-input me-1" value="{{subplace}}" name="subplace"> {{subplace}}
                        </li> -->
                        <!-- ****************** -->
                    </ul>
                </div>
            </li>

            <li id="hazard">
                <p class="filter-title">HAZARD</p>
                <div class="filter">
                    <!-- part1 -->
                    <p class="filter-type">rdf:subClassOf<i class="bi bi-chevron-up"></i></p>

                    <!-- part2 -->
                    <input type="text" class="form-control" placeholder="Find a filter">

                    <!-- part3 -->
                    <ul class="list-group" id="hazard-list">
                        <!-- <li ng-repeat="hazard in hazards">
                            <span><input type="checkbox" class="form-check-input me-1" value="{{hazard}}" name="hazard">
                                {{hazard}}</span>
                        </li> -->
                        <li ng-repeat="hazardUrl in hazardsUrls">
                            <span><input type="checkbox" class="form-check-input me-1"
                                    ng-click="selectHazard($event)" value="{{hazardUrl}}" name="hazard">{{getHazardLabel(hazardUrl)}}</span>
                        </li>
                    </ul>

                </div>
            </li>

            <li id="datarange-li">
                <p class="filter-title" id="data-range">Data Range</p>
                <form class="data-range-form">
                    <input type="text" class="form-control mb-1" id="start-year-input" placeholder="Start Year" name="start-year">
                    <input type="text" class="form-control mb-1" id="end-year-input" placeholder="End Year" name="end-year">
                    <button type="submit" class="btn btn-primary mb-2" onclick="getData()">Search</button>
                </form>
            </li>
        </ul>
    </div>
    <div class="results" ng-controller="results-controller">
        <div class="results-container">
            <div class="results-count">
                <p id="ttl-results"><span>{{totalResultsNumber}}</span>Results</p>
                <p id="sort-by">Sort By <i class="bi bi-chevron-down"></i></p>
                <p id="cnfg-tb">Configure Table Columns</p>
            </div>
            <div class="results-nav">
                <ul class="nav nav-pills" id="pills-tab" role="tablist">
                    <li class="nav-item" role="presentation">
                        <button class="btn" id="pills-people-tab" data-bs-toggle="pill" data-bs-target="#pills-people" type="button" role="tab" aria-controls="pills-people" aria-selected="false">
                            <span><img src="../images/people.svg" alt=""> People</span>
                        </button>
                    </li>
                    <li class="nav-item" role="presentation">
                        <button class="btn" id="pills-place-tab" data-bs-toggle="pill" data-bs-target="#pills-place" type="button" role="tab" aria-controls="pills-place" aria-selected="false">
                            <span><img src="../images/Place.svg" alt=""> Place</span>
                        </button>
                    </li>
                    <li class="nav-item" role="presentation">
                        <button class="btn active" id="pills-hazard-tab" data-bs-toggle="pill" data-bs-target="#pills-hazard" type="button" role="tab" aria-controls="pills-hazard" aria-selected="false">
                            <span><img src="../images/hazard.svg" alt=""> Hazard</span>
                        </button>
                    </li>

                </ul>
            </div>
            <div class="results-table">


                <div class="tab-content table-container table-responsive" id="pills-tabContent">
                    <!-- People table -->
                    <div class="tab-pane fade" id="pills-people" role="tabpanel" aria-labelledby="pills-people-tab">
                        <!-- <table class="table table-filters table-title " id="table-people-title">
                            <thead>
                                <tr>
                                    <th scope="col">Title-peope</th>
                                    <th scope="col">Type</th>
                                    <th scope="col">Label</th>
                                    <th scope="col">Affiliation</th>
                                    <th scope="col">Department</th>
                                    <th scope="col">First Name</th>
                                    <th scope="col">Last Name</th>
                                </tr>
                            </thead>
                        </table> -->

                        <!-- <div class="table-body-container" id="people-div">
                            <table class="table table-filters table-body table-hover" id="table-body-people">
                                <tbody>
                                    <tr onclick="location.href='#'">
                                        <td>Record Title-people</td>
                                        <td>Expert</td>
                                        <td>Alejandro Feged</td>
                                        <td>Universidad del Rosario</td>
                                        <td><a href="#">International Political Urban Studies</a></td>
                                        <td>Alejandro</td>
                                        <td>Feged</td>
                                    </tr>
                                    <tr>
                                        <td>Record Title</td>
                                        <td>Expert</td>
                                        <td>Alejandro Feged</td>
                                        <td>Universidad del Rosario</td>
                                        <td><a href="#">International Political Urban Studies</a></td>
                                        <td>Alejandro</td>
                                        <td>Feged</td>
                                    </tr>
                                    <tr>
                                        <td>Record Title</td>
                                        <td>Expert</td>
                                        <td>Alejandro Feged</td>
                                        <td>Universidad del Rosario</td>
                                        <td><a href="#">International Political Urban Studies</a></td>
                                        <td>Alejandro</td>
                                        <td>Feged</td>
                                    </tr>
                                    <tr>
                                        <td>Record Title</td>
                                        <td>Expert</td>
                                        <td>Alejandro Feged</td>
                                        <td>Universidad del Rosario</td>
                                        <td><a href="#">International Political Urban Studies</a></td>
                                        <td>Alejandro</td>
                                        <td>Feged</td>
                                    </tr>
                                    <tr>
                                        <td>Record Title</td>
                                        <td>Expert</td>
                                        <td>Alejandro Feged</td>
                                        <td>Universidad del Rosario</td>
                                        <td><a href="#">International Political Urban Studies</a></td>
                                        <td>Alejandro</td>
                                        <td>Feged</td>
                                    </tr>
                                    <tr>
                                        <td>Record Title</td>
                                        <td>Expert</td>
                                        <td>Alejandro Feged</td>
                                        <td>Universidad del Rosario</td>
                                        <td><a href="#">International Political Urban Studies</a></td>
                                        <td>Alejandro</td>
                                        <td>Feged</td>
                                    </tr>
                                    <tr>
                                        <td>Record Title</td>
                                        <td>Expert</td>
                                        <td>Alejandro Feged</td>
                                        <td>Universidad del Rosario</td>
                                        <td><a href="#">International Political Urban Studies</a></td>
                                        <td>Alejandro</td>
                                        <td>Feged</td>
                                    </tr>
                                    <tr>
                                        <td>Record Title</td>
                                        <td>Expert</td>
                                        <td>Alejandro Feged</td>
                                        <td>Universidad del Rosario</td>
                                        <td><a href="#">International Political Urban Studies</a></td>
                                        <td>Alejandro</td>
                                        <td>Feged</td>
                                    </tr>
                                    <tr>
                                        <td>Record Title</td>
                                        <td>Expert</td>
                                        <td>Alejandro Feged</td>
                                        <td>Universidad del Rosario</td>
                                        <td><a href="#">International Political Urban Studies</a></td>
                                        <td>Alejandro</td>
                                        <td>Feged</td>
                                    </tr>
                                    <tr>
                                        <td>Record Title</td>
                                        <td>Expert</td>
                                        <td>Alejandro Feged</td>
                                        <td>Universidad del Rosario</td>
                                        <td><a href="#">International Political Urban Studies</a></td>
                                        <td>Alejandro</td>
                                        <td>Feged</td>
                                    </tr>

                                </tbody>
                            </table>
                        </div> -->
                        <table id="expertTableTitle" class="table table-filters table-title">
                            <thead>
                                <tr></tr>
                            </thead>
                        </table>
                        <div id="expertTable-body" class="table-body-container">
                            <table id="expertTableBody" class="table table-filters table-body table-hover">
                                <tbody></tbody>
                            </table>
                        </div>
                        <div class="paginate" id="expertPagination"></div>
                    </div>

                    <!-- Place table -->
                    <div class="tab-pane fade" id="pills-place" role="tabpanel" aria-labelledby="pills-place-tab">
                        <!-- <table class="table table-filters table-title" id="table-place-title">
                            <thead>
                                <tr>
                                    <th scope="col">Title</th>
                                    <th scope="col">Type</th>
                                    <th scope="col">Label</th>
                                    <th scope="col">Affiliation</th>
                                    <th scope="col">Department</th>
                                    <th scope="col">First Name</th>
                                    <th scope="col">Last Name</th>
                                </tr>
                            </thead>
                        </table> -->
                        <!-- <div class="table-body-container">
                            <table class="table table-filters table-body table-hover" id="table-body-place">
                                <tbody>
                                    <tr onclick="location.href='#'">
                                        <td>Place</td>
                                        <td>Expert</td>
                                        <td>Alejandro Feged</td>
                                        <td>Universidad del Rosario</td>
                                        <td><a href="#">International Political Urban Studies</a></td>
                                        <td>Alejandro</td>
                                        <td>Feged</td>
                                    </tr>
                                    <tr>
                                        <td>Record Title</td>
                                        <td>Expert</td>
                                        <td>Alejandro Feged</td>
                                        <td>Universidad del Rosario</td>
                                        <td><a href="#">International Political Urban Studies</a></td>
                                        <td>Alejandro</td>
                                        <td>Feged</td>
                                    </tr>
                                    <tr>
                                        <td>Record Title</td>
                                        <td>Expert</td>
                                        <td>Alejandro Feged</td>
                                        <td>Universidad del Rosario</td>
                                        <td><a href="#">International Political Urban Studies</a></td>
                                        <td>Alejandro</td>
                                        <td>Feged</td>
                                    </tr>
                                    <tr>
                                        <td>Record Title</td>
                                        <td>Expert</td>
                                        <td>Alejandro Feged</td>
                                        <td>Universidad del Rosario</td>
                                        <td><a href="#">International Political Urban Studies</a></td>
                                        <td>Alejandro</td>
                                        <td>Feged</td>
                                    </tr>
                                    <tr>
                                        <td>Record Title</td>
                                        <td>Expert</td>
                                        <td>Alejandro Feged</td>
                                        <td>Universidad del Rosario</td>
                                        <td><a href="#">International Political Urban Studies</a></td>
                                        <td>Alejandro</td>
                                        <td>Feged</td>
                                    </tr>
                                    <tr>
                                        <td>Record Title</td>
                                        <td>Expert</td>
                                        <td>Alejandro Feged</td>
                                        <td>Universidad del Rosario</td>
                                        <td><a href="#">International Political Urban Studies</a></td>
                                        <td>Alejandro</td>
                                        <td>Feged</td>
                                    </tr>
                                    <tr>
                                        <td>Record Title</td>
                                        <td>Expert</td>
                                        <td>Alejandro Feged</td>
                                        <td>Universidad del Rosario</td>
                                        <td><a href="#">International Political Urban Studies</a></td>
                                        <td>Alejandro</td>
                                        <td>Feged</td>
                                    </tr>
                                    <tr>
                                        <td>Record Title</td>
                                        <td>Expert</td>
                                        <td>Alejandro Feged</td>
                                        <td>Universidad del Rosario</td>
                                        <td><a href="#">International Political Urban Studies</a></td>
                                        <td>Alejandro</td>
                                        <td>Feged</td>
                                    </tr>
                                    <tr>
                                        <td>Record Title</td>
                                        <td>Expert</td>
                                        <td>Alejandro Feged</td>
                                        <td>Universidad del Rosario</td>
                                        <td><a href="#">International Political Urban Studies</a></td>
                                        <td>Alejandro</td>
                                        <td>Feged</td>
                                    </tr>
                                    <tr>
                                        <td>Record Title</td>
                                        <td>Expert</td>
                                        <td>Alejandro Feged</td>
                                        <td>Universidad del Rosario</td>
                                        <td><a href="#">International Political Urban Studies</a></td>
                                        <td>Alejandro</td>
                                        <td>Feged</td>
                                    </tr>
                                    <tr>
                                        <td>Record Title</td>
                                        <td>Expert</td>
                                        <td>Alejandro Feged</td>
                                        <td>Universidad del Rosario</td>
                                        <td><a href="#">International Political Urban Studies</a></td>
                                        <td>Alejandro</td>
                                        <td>Feged</td>
                                    </tr>
                                    <tr>
                                        <td>Record Title</td>
                                        <td>Expert</td>
                                        <td>Alejandro Feged</td>
                                        <td>Universidad del Rosario</td>
                                        <td><a href="#">International Political Urban Studies</a></td>
                                        <td>Alejandro</td>
                                        <td>Feged</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div> -->
                        <!-- <table id="place-table" class="table table-hover" data-height="500" data-pagination="true"></table> -->
                        <table id="placeTableTitle" class="table table-filters table-title">
                            <thead>
                                <tr></tr>
                            </thead>
                        </table>
                        <div id="placeTable-body" class="table-body-container">

                            <table id="placeTableBody" class="table table-filters table-body table-hover">

                                <tbody></tbody>
                            </table>
                        </div>
                        <!-- <ul class="pagination" id="placePagination"></ul> -->
                        <div class="paginate" id="placePagination"></div>
                    </div>

                    <!-- hazard table -->
                    <div class="tab-pane active" id="pills-hazard" role="tabpanel" aria-labelledby="pills-hazard-tab">
                        <table id="hazardTableTitle" class="table table-filters table-title">

                            <thead>
                                <tr></tr>
                            </thead>
                        </table>
                        <div id="hazardTable-body" class="table-body-container">

                            <table id="hazardTableBody" class="table table-filters table-body table-hover">

                                <tbody></tbody>
                            </table>
                        </div>
                        <div class="paginate" id="hazardPagination"></div>

                    </div>





                </div>
                <!-- <div class="rlts-pagination" ng-controller="pagination-controller as vm">
                    <div class="per-page"><span>12</span> Per Page
                        <i class="bi bi-chevron-down"></i>
                            </div>


                            <ul class="pagination">
                                <li class="page-item active" ng-click="clickPage(1)"><a class="pg-link">1</a></li>
                                <li class="page-item" ng-click="clickPage(2)"><a class="pg-link">2</a></li>
                                <li class="page-item" ng-click="clickPage(3)"><a class="pg-link">3</a></li>
                                <li class="page-item" ng-click="clickPage(4)"><a class="pg-link">4</a></li>
                                <li class="page-item" ng-click="clickPage(5)"><a class="pg-link">5</a></li>
                                <li class="page-item"><a class="pg-link">...</a></li>
                                <li class="page-item" ng-click="clickPage(7)"><a class="pg-link">310</a></li>
                                <li><button id="nxt-pg">Next</button></li>
                            </ul>


                    </div> -->

            </div>
        </div>

    </div>

    <div class="map" id="spatial-search-map" ng-controller="spatialmap-controller"></div>

    <script>
        // getPagination('#table-id');

        // function getPagination(table) {
        //     var lastPage = 1;

        //     $('#maxRows')
        //         .on('change', function(evt) {
        //             //$('.paginationprev').html('');						// reset pagination

        //             lastPage = 1;
        //             $('.pagination')
        //                 .find('li')
        //                 .slice(1, -1)
        //                 .remove();
        //             var trnum = 0; // reset tr counter
        //             var maxRows = parseInt($(this).val()); // get Max Rows from select option

        //             if (maxRows == 5000) {
        //                 $('.pagination').hide();
        //             } else {
        //                 $('.pagination').show();
        //             }

        //             var totalRows = $(table + ' tbody tr').length; // numbers of rows
        //             $(table + ' tr:gt(0)').each(function() {
        //                 // each TR in  table and not the header
        //                 trnum++; // Start Counter
        //                 if (trnum > maxRows) {
        //                     // if tr number gt maxRows

        //                     $(this).hide(); // fade it out
        //                 }
        //                 if (trnum <= maxRows) {
        //                     $(this).show();
        //                 } // else fade in Important in case if it ..
        //             }); //  was fade out to fade it in
        //             if (totalRows > maxRows) {
        //                 // if tr total rows gt max rows option
        //                 var pagenum = Math.ceil(totalRows / maxRows); // ceil total(rows/maxrows) to get ..
        //                 //	numbers of pages
        //                 for (var i = 1; i <= pagenum;) {
        //                     // for each page append pagination li
        //                     $('.pagination #prev')
        //                         .before(
        //                             '<li data-page="' +
        //                             i +
        //                             '">\
        // 						  <span>' +
        //                             i++ +
        //                             '<span class="sr-only">(current)</span></span>\
        // 						</li>'
        //                         )
        //                         .show();
        //                 } // end for i
        //             } // end if row count > max rows
        //             $('.pagination [data-page="1"]').addClass('active'); // add active class to the first li
        //             $('.pagination li').on('click', function(evt) {
        //                 // on click each page
        //                 evt.stopImmediatePropagation();
        //                 evt.preventDefault();
        //                 var pageNum = $(this).attr('data-page'); // get it's number

        //                 var maxRows = parseInt($('#maxRows').val()); // get Max Rows from select option

        //                 if (pageNum == 'prev') {
        //                     if (lastPage == 1) {
        //                         return;
        //                     }
        //                     pageNum = --lastPage;
        //                 }
        //                 if (pageNum == 'next') {
        //                     if (lastPage == $('.pagination li').length - 2) {
        //                         return;
        //                     }
        //                     pageNum = ++lastPage;
        //                 }

        //                 lastPage = pageNum;
        //                 var trIndex = 0; // reset tr counter
        //                 $('.pagination li').removeClass('active'); // remove active class from all li
        //                 $('.pagination [data-page="' + lastPage + '"]').addClass('active'); // add active class to the clicked
        //                 // $(this).addClass('active');					// add active class to the clicked
        //                 limitPagging();
        //                 $(table + ' tr:gt(0)').each(function() {
        //                     // each tr in table not the header
        //                     trIndex++; // tr index counter
        //                     // if tr index gt maxRows*pageNum or lt maxRows*pageNum-maxRows fade if out
        //                     if (
        //                         trIndex > maxRows * pageNum ||
        //                         trIndex <= maxRows * pageNum - maxRows
        //                     ) {
        //                         $(this).hide();
        //                     } else {
        //                         $(this).show();
        //                     } //else fade in
        //                 }); // end of for each tr in table
        //             }); // end of on click pagination list
        //             limitPagging();
        //         })
        //         .val(5)
        //         .change();

        // }

        // function limitPagging() {
        //     // alert($('.pagination li').length)

        //     if ($('.pagination li').length > 7) {
        //         if ($('.pagination li.active').attr('data-page') <= 3) {
        //             $('.pagination li:gt(5)').hide();
        //             $('.pagination li:lt(5)').show();
        //             $('.pagination [data-page="next"]').show();
        //         }
        //         if ($('.pagination li.active').attr('data-page') > 3) {
        //             $('.pagination li:gt(0)').hide();
        //             $('.pagination [data-page="next"]').show();
        //             for (let i = (parseInt($('.pagination li.active').attr('data-page')) - 2); i <= (parseInt($('.pagination li.active').attr('data-page')) + 2); i++) {
        //                 $('.pagination [data-page="' + i + '"]').show();

        //             }

        //         }
        //     }
        // }

        // $(function() {
        //     // Just to append id number for each row
        //     $('table tr:eq(0)').prepend('<th> ID </th>');

        //     var id = 0;

        //     $('table tr:gt(0)').each(function() {
        //         id++;
        //         $(this).prepend('<td>' + id + '</td>');
        //     });
        // });
    </script>



</main>